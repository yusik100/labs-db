# üéµ –ë–∞–∑–∞ –¥–∞–Ω–∏—Ö

## 1. –û–ø–∏—Å –ø—Ä–æ—î–∫—Ç—É

–¶—è –±–∞–∑–∞ –¥–∞–Ω–∏—Ö –º–æ–¥–µ–ª—é—î —Å—Ç—Ä—É–∫—Ç—É—Ä—É –º—É–∑–∏—á–Ω–æ–≥–æ –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É, –≤ —è–∫–æ–º—É –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ –º–æ–∂—É—Ç—å:

- —Å–ª—É—Ö–∞—Ç–∏ —Ç—Ä–µ–∫–∏, –∞–ª—å–±–æ–º–∏ –π –≤–∏–∫–æ–Ω–∞–≤—Ü—ñ–≤,
- —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ –≤–ª–∞—Å–Ω—ñ –ø–ª–µ–π–ª–∏—Å—Ç–∏,
- –æ—Ñ–æ—Ä–º–ª—é–≤–∞—Ç–∏ –ø—ñ–¥–ø–∏—Å–∫–∏ —Ä—ñ–∑–Ω–∏—Ö —Ç–∏–ø—ñ–≤.

---

## 2. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö

### –¢–∞–±–ª–∏—Ü—è **Artist**

| –ü–æ–ª–µ       | –¢–∏–ø                | –û–ø–∏—Å                               |
| ---------- | ------------------ | ---------------------------------- |
| artist_id  | SERIAL PRIMARY KEY | –£–Ω—ñ–∫–∞–ª—å–Ω–∏–π —ñ–¥–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ç–æ—Ä –≤–∏–∫–æ–Ω–∞–≤—Ü—è |
| stage_name | VARCHAR(64)        | –°—Ü–µ–Ω—ñ—á–Ω–µ —ñ–º‚Äô—è                      |
| country    | VARCHAR(32)        | –ö—Ä–∞—ó–Ω–∞ –ø–æ—Ö–æ–¥–∂–µ–Ω–Ω—è                  |
| genre      | VARCHAR(32)        | –ú—É–∑–∏—á–Ω–∏–π –∂–∞–Ω—Ä                      |

---

### –¢–∞–±–ª–∏—Ü—è **Album**

| –ü–æ–ª–µ         | –¢–∏–ø                | –û–ø–∏—Å                                                           |
| ------------ | ------------------ | -------------------------------------------------------------- |
| album_id     | SERIAL PRIMARY KEY | –Ü–¥–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ç–æ—Ä –∞–ª—å–±–æ–º—É                                          |
| title        | VARCHAR(64)        | –ù–∞–∑–≤–∞ –∞–ª—å–±–æ–º—É                                                  |
| release_year | INT                | –†—ñ–∫ –≤–∏–ø—É—Å–∫—É (‚â• 1900)                                           |
| artist_id    | INT                | –ó–æ–≤–Ω—ñ—à–Ω—ñ–π –∫–ª—é—á ‚Üí `Artist(artist_id)` <br> –í–∏–¥–∞–ª—è—î—Ç—å—Å—è –∫–∞—Å–∫–∞–¥–Ω–æ |

---

### –¢–∞–±–ª–∏—Ü—è **Track**

| –ü–æ–ª–µ         | –¢–∏–ø                | –û–ø–∏—Å                                                      |
| ------------ | ------------------ | --------------------------------------------------------- |
| track_id     | SERIAL PRIMARY KEY | –Ü–¥–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ç–æ—Ä —Ç—Ä–µ–∫—É                                       |
| title        | VARCHAR(64)        | –ù–∞–∑–≤–∞ —Ç—Ä–µ–∫—É                                               |
| duration     | INT                | –¢—Ä–∏–≤–∞–ª—ñ—Å—Ç—å —É —Å–µ–∫—É–Ω–¥–∞—Ö                                     |
| release_date | DATE               | –î–∞—Ç–∞ –≤–∏–ø—É—Å–∫—É                                              |
| album_id     | INT                | –ó–æ–≤–Ω—ñ—à–Ω—ñ–π –∫–ª—é—á ‚Üí `Album(album_id)` <br> ON DELETE CASCADE |

---

### –¢–∞–±–ª–∏—Ü—è **User**

| –ü–æ–ª–µ              | –¢–∏–ø                | –û–ø–∏—Å                      |
| ----------------- | ------------------ | ------------------------- |
| user_id           | SERIAL PRIMARY KEY | –Ü–¥–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ç–æ—Ä –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ |
| name              | VARCHAR(32)        | –Ü–º‚Äô—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞          |
| email             | VARCHAR(32) UNIQUE | –ï–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∞ –ø–æ—à—Ç–∞          |
| password_hash     | VARCHAR(255)       | –•–µ—à–æ–≤–∞–Ω–∏–π –ø–∞—Ä–æ–ª—å          |
| registration_date | DATE               | –î–∞—Ç–∞ —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó           |

---

### –¢–∞–±–ª–∏—Ü—è **Playlist**

| –ü–æ–ª–µ        | –¢–∏–ø                | –û–ø–∏—Å                                                    |
| ----------- | ------------------ | ------------------------------------------------------- |
| playlist_id | SERIAL PRIMARY KEY | –Ü–¥–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ç–æ—Ä –ø–ª–µ–π–ª–∏—Å—Ç–∞                                 |
| title       | VARCHAR(64)        | –ù–∞–∑–≤–∞ –ø–ª–µ–π–ª–∏—Å—Ç–∞                                         |
| created_at  | DATE               | –î–∞—Ç–∞ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è                                          |
| user_id     | INT                | –ó–æ–≤–Ω—ñ—à–Ω—ñ–π –∫–ª—é—á ‚Üí `User(user_id)` <br> ON DELETE CASCADE |

---

### –¢–∞–±–ª–∏—Ü—è **PlaylistTrack**

| –ü–æ–ª–µ                                    | –¢–∏–ø | –û–ø–∏—Å                                         |
| --------------------------------------- | --- | -------------------------------------------- |
| playlist_id                             | INT | –ó–æ–≤–Ω—ñ—à–Ω—ñ–π –∫–ª—é—á ‚Üí `Playlist(playlist_id)`     |
| track_id                                | INT | –ó–æ–≤–Ω—ñ—à–Ω—ñ–π –∫–ª—é—á ‚Üí `Track(track_id)`           |
| **PRIMARY KEY** (playlist_id, track_id) |     | –ë–∞–≥–∞—Ç–æ-–¥–æ-–±–∞–≥–∞—Ç—å–æ—Ö –º—ñ–∂ –ø–ª–µ–π–ª–∏—Å—Ç–∞–º–∏ —ñ —Ç—Ä–µ–∫–∞–º–∏ |

---

### –¢–∞–±–ª–∏—Ü—è **SubscriptionType**

| –ü–æ–ª–µ    | –¢–∏–ø                | –û–ø–∏—Å                             |
| ------- | ------------------ | -------------------------------- |
| type_id | SERIAL PRIMARY KEY | –Ü–¥–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ç–æ—Ä —Ç–∏–ø—É –ø—ñ–¥–ø–∏—Å–∫–∏      |
| name    | VARCHAR(32)        | –ù–∞–∑–≤–∞ –ø—ñ–¥–ø–∏—Å–∫–∏ (No Ads, Premium) |
| price   | DECIMAL(6,2)       | –¶—ñ–Ω–∞ (–¥–æ 9999.99)                |

---

### –¢–∞–±–ª–∏—Ü—è **Subscription**

| –ü–æ–ª–µ            | –¢–∏–ø                | –û–ø–∏—Å                                                    |
| --------------- | ------------------ | ------------------------------------------------------- |
| subscription_id | SERIAL PRIMARY KEY | –Ü–¥–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ç–æ—Ä –ø—ñ–¥–ø–∏—Å–∫–∏                                  |
| type_id         | INT                | –ó–æ–≤–Ω—ñ—à–Ω—ñ–π –∫–ª—é—á ‚Üí `SubscriptionType(type_id)`            |
| start_date      | DATE               | –î–∞—Ç–∞ –ø–æ—á–∞—Ç–∫—É                                            |
| end_date        | DATE               | –ú–æ–∂–µ –±—É—Ç–∏ `NULL`, —è–∫—â–æ –∞–∫—Ç–∏–≤–Ω–∞                          |
| user_id         | INT                | –ó–æ–≤–Ω—ñ—à–Ω—ñ–π –∫–ª—é—á ‚Üí `User(user_id)` <br> ON DELETE CASCADE |

---

### –¢–∞–±–ª–∏—Ü—è **TrackArtist**

| –ü–æ–ª–µ                                  | –¢–∏–ø | –û–ø–∏—Å                                         |
| ------------------------------------- | --- | -------------------------------------------- |
| track_id                              | INT | –ó–æ–≤–Ω—ñ—à–Ω—ñ–π –∫–ª—é—á ‚Üí `Track(track_id)`           |
| artist_id                             | INT | –ó–æ–≤–Ω—ñ—à–Ω—ñ–π –∫–ª—é—á ‚Üí `Artist(artist_id)`         |
| **PRIMARY KEY** (track_id, artist_id) |     | –ë–∞–≥–∞—Ç–æ-–¥–æ-–±–∞–≥–∞—Ç—å–æ—Ö –º—ñ–∂ —Ç—Ä–µ–∫–∞–º–∏ —ñ –≤–∏–∫–æ–Ω–∞–≤—Ü—è–º–∏ |

---

### –¢–∞–±–ª–∏—Ü—è **AlbumArtist**

| –ü–æ–ª–µ                                  | –¢–∏–ø | –û–ø–∏—Å                                           |
| ------------------------------------- | --- | ---------------------------------------------- |
| album_id                              | INT | –ó–æ–≤–Ω—ñ—à–Ω—ñ–π –∫–ª—é—á ‚Üí `Album(album_id)`             |
| artist_id                             | INT | –ó–æ–≤–Ω—ñ—à–Ω—ñ–π –∫–ª—é—á ‚Üí `Artist(artist_id)`           |
| **PRIMARY KEY** (album_id, artist_id) |     | –ë–∞–≥–∞—Ç–æ-–¥–æ-–±–∞–≥–∞—Ç—å–æ—Ö –º—ñ–∂ –∞–ª—å–±–æ–º–∞–º–∏ —ñ –≤–∏–∫–æ–Ω–∞–≤—Ü—è–º–∏ |

---

## 3. –û—Å–Ω–æ–≤–Ω—ñ –∑–≤‚Äô—è–∑–∫–∏

- –û–¥–∏–Ω **Artist** –º–æ–∂–µ –º–∞—Ç–∏ –∫—ñ–ª—å–∫–∞ **Album**.
- –û–¥–∏–Ω **Album** –º–æ–∂–µ –º—ñ—Å—Ç–∏—Ç–∏ –∫—ñ–ª—å–∫–∞ **Track**.
- –û–¥–∏–Ω **User** –º–æ–∂–µ –º–∞—Ç–∏ –∫—ñ–ª—å–∫–∞ **Playlist** —ñ –æ–¥–Ω—É **Subscription**.
- **Playlist** –º–æ–∂–µ –º—ñ—Å—Ç–∏—Ç–∏ –±–∞–≥–∞—Ç–æ **Track**, —ñ –æ–¥–∏–Ω **Track** –º–æ–∂–µ –±—É—Ç–∏ –≤ –∫—ñ–ª—å–∫–æ—Ö –ø–ª–µ–π–ª–∏—Å—Ç–∞—Ö (—á–µ—Ä–µ–∑ —Ç–∞–±–ª–∏—Ü—é `PlaylistTrack`).
- –ó–≤‚Äô—è–∑–∫–∏ "–±–∞–≥–∞—Ç–æ-–¥–æ-–±–∞–≥–∞—Ç—å–æ—Ö" —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω—ñ —á–µ—Ä–µ–∑ –¥–æ–ø–æ–º—ñ–∂–Ω—ñ —Ç–∞–±–ª–∏—Ü—ñ (`PlaylistTrack`, `TrackArtist`, `AlbumArtist`).

---

## 4. –í–∞–∂–ª–∏–≤—ñ –ø—Ä–∏–ø—É—â–µ–Ω–Ω—è

- –î–∞—Ç–∞ –∑–∞–∫—ñ–Ω—á–µ–Ω–Ω—è –ø—ñ–¥–ø–∏—Å–∫–∏ `end_date` –º–æ–∂–µ –±—É—Ç–∏ `NULL`, —è–∫—â–æ –ø—ñ–¥–ø–∏—Å–∫–∞ –∞–∫—Ç–∏–≤–Ω–∞.
- –£—Å—ñ –∑–æ–≤–Ω—ñ—à–Ω—ñ –∫–ª—é—á—ñ –º–∞—é—Ç—å –ø—Ä–∞–≤–∏–ª–æ **ON DELETE CASCADE**, —â–æ–± –∑–∞–±–µ–∑–ø–µ—á–∏—Ç–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –≤–∏–¥–∞–ª–µ–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–∏—Ö –∑–∞–ø–∏—Å—ñ–≤.
- –ü–æ–ª–µ `release_year` —É —Ç–∞–±–ª–∏—Ü—ñ `Album` –º–∞—î –æ–±–º–µ–∂–µ–Ω–Ω—è `CHECK (release_year >= 1900)`.
- –ó–Ω–∞—á–µ–Ω–Ω—è `price` —É —Ç–∞–±–ª–∏—Ü—ñ `SubscriptionType` –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è —É —Ñ–æ—Ä–º–∞—Ç—ñ `DECIMAL(6,2)` (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, `9.99`).

---

## 5. –ü—Ä–∏–∫–ª–∞–¥–∏ –¥–∞–Ω–∏—Ö

![–¢–∞–±–ª–∏—Ü—è User](examples/example1.png)

---

![–¢–∞–±–ª–∏—Ü—è Track](examples/example2.png)

---

![–¢–∞–±–ª–∏—Ü—è PlaylistTrack](examples/example3.png)

---

## 6. ER-–¥—ñ–∞–≥—Ä–∞–º–∞

![–î—ñ–∞–≥—Ä–∞–º–∞](examples/ERD.png)
